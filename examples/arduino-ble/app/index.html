<!DOCTYPE html>
<!--
	Description:

	BLE example application that demonstrates how to communicate
	with an Arduino BLE shield.

	Requirements:

	See text in the app user interface.
-->
<html>

<head>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, user-scalable=no,
		shrink-to-fit=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

	<title>Arduino BLE</title>

	<style>
		@import 'ui/css/evothings-app.css';
	</style>

	<script>
	// Redirect console.log to Evothings Workbench.
	if (window.hyper && window.hyper.log) { console.log = hyper.log }
	</script>

	<script src="cordova.js"></script>
	<script src="libs/jquery/jquery.js"></script>
	<script src="libs/evothings/evothings.js"></script>
	<script src="libs/evothings/ui/ui.js"></script>
	<script src="app.js"></script>

</head>

<body ontouchstart=""><!-- ontouchstart="" enables low-delay CSS transitions. -->

	<header>
		<button class="back" onclick="history.back()">
			<img src="ui/images/arrow-left.svg" />
		</button>

		<img class="logotype" src="ui/images/logo.svg" alt="Evothings" />

		<!--<button class="menu" onclick=""><img src="ui/images/menu.svg" /></button>-->
	</header>

	<h1>Arduino BLE</h1>

	<p><strong>Status:</strong> <span id="status">Idle</span></p>

	<button id="on" onclick="app.on();" class="green">LED ON</button>
	<button id="off" onclick="app.off();" class="red">LED OFF</button>

	<h2>Variable resistor value</h2>
	<canvas id="canvas" width="300" height="200"></canvas>

	<h2>Instructions</h2>

	<ol>
		<li>
			Build the Arduino circuit shown below.<br />
			<figure>
				<img src="arduino-ble-board-sketch.png" style="width: 100%;" />
				<figcaption>
					Note: the sketch is missing the <a onclick="app.openBrowser('http://redbearlab.com/bleshield/')">RedBearLab BLE Shield</a>.
				</figcaption>
			</figure>
		</li>
		<li>
			Connect the Arduino to your computer.
		</li>
		<li>
			Start the <a onclick="app.openBrowser('http://arduino.cc/en/Main/Software');">Arduino IDE</a>. If it's your first time using the BLE Shield then go to <a onclick="app.openBrowser('http://redbearlab.com/getting-started-bleshield/');">Getting Started with BLE Shield</a> and follow the instructions regarding libraries setup.
		</li>
		<li>
			Press the Code button in the Evothings Workbench and go to the 'arduinoble' folder.
		</li>
		<li>
			Open the file <code>arduinoble.ino</code> with the Arduino IDE and press the Upload button.
		</li>
		<li>
			Reload this app by pressing the Run button in Evothings Workbench.
		</li>
	</ol>

	<h2>How it works</h2>

	<p>The LED ON &amp; LED OFF buttons controls digital pin 2 on the Arduino which is here connected to an LED. The plot shows the input from analog pin A0 which is here connected to a variable resistor.</p>

	<h2>Notes</h2>

	<p>Make sure to run this app in the Evothings client app, or build a Cordova app with the plugin &quot;com.evothings.ble&quot;. A mobile device having iOS 7 or Android 4.3 or higher is required.</p>

	<h2>Troubleshooting</h2>

	<p>There are known problems with that BLE stops working when switching between apps or doing multiple reloads. In this case restart the Evothings client app. Additionally, you can use the Evothings Workbench Tools to see any error messages that may help in your investigation.</p>

</body>

</html>
